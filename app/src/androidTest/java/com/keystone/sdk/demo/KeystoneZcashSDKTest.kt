package com.keystone.sdk.demo

import androidx.test.ext.junit.runners.AndroidJUnit4
import com.keystone.module.AptosAccount
import com.keystone.module.AptosSignRequest
import com.keystone.sdk.KeystoneZcashSDK
import com.keystone.sdk.KeystoneSDK
import com.sparrowwallet.hummingbird.UR

import org.junit.Test
import org.junit.runner.RunWith

import org.junit.Assert.*

@RunWith(AndroidJUnit4::class)
class KeystoneZcashSDKTest {
    @Test
    fun generatePczt() {

        val sdk = KeystoneSDK()
        KeystoneSDK.maxFragmentLen = 400
        val res = sdk.zcash.generatePczt("50435a5401000000058ace9cb502d5a09cc70c0100d782a80185010001227a636173685f636c69656e745f6261636b656e643a70726f706f73616c5f696e666f140cd612b51afd462f8b19e3edcaf79157af82a8010001a08d061976a9149517c77b7fcc08e66122dccb6ee6713eb7712d2b88ac000001207a636173685f636c69656e745f6261636b656e643a6f75747075745f696e666f250023743158547742385031783459697042744c6850575331334a50445135524d6b4d41364d000000fbc2f4300c01f0b7820d00e3347c8da4ee614674376cbc45359daa54f9b5493e010000000000000000000000000000000000000000000000000000000000000000022c4a0c1a201bb53f6a3e4d7ce33e925e2a54cbfde0e6c0d5a689b2c02088ea016bbe571d1766f717ec87c4a7193a5b07be5d78b2c17961421bec9b1004465c096e1d4f8065201a49e55e1e43c5f35f3fc010f48aaa50389ec6548bc1ffe91e0a0156b7a4778e0d342347f7a938bc89032920f9ec1bbcf36c068e4b1853f71ae58f97ed498678432d21d81872ad0f83b5739b02e536f0d2bff250cd9ed4b276521e01a2a270020b6c215fcbf997b9a93f7c23070ef62f8cccbe86783886bd11be54ceb57f0b8406694e5e88948f010001d23fd52f85bd39949a780203a3ddd59a5a6f95837723f67c17fd9f11657b711d019578eb4e84e8e2e4e9d8a2c58d8ccc53b819e4fa100ee3ae7ec8820035f241e801d712a371cb0358c38153edaed92dba72aaf8aa371d86d7c7514d6b733867f62b6bc02f8fe5cd8d43415daddcdb2b35edac525f6f3d117c03432f5dd329db7f2373b92addd21f7487a849043a3cf094d7c3ae6efe214bce70873a8485a806321e01ea828dfd0de0bbe0f2aa7ab9cfc48caae04cf5db73f8429d6a3531c8d890ad0282391a4a3604c68e334efa6c3304c4707752c6c68eda1214fb9d04367e0d18235f56acd7070ba1f67063837d18ed849252bfd1abba2f5f84a07d119eebf0d6328693d4fa2db3f0876a7d0ad1e73288af7fea17bd1acad6bf992eaf3427ed7c6338b99a093f2e1dd5ad382a855988951e50f567de05626409cd3940acf46b53da979a83771bf505e3c24a42c4ec117120ff778809f2c2402c549e4f8cdcf16b87368a0166262c7654d7a80a28660e7f5cee72617665140ef8516c28d0ec845572cc0b2acd1d13d6699b0603fbb781312e79185c9a2a55aafc63cb4cd1815355a5bbbaf7b43906a7020a1e29e8c1061d488f176dabeb18768901e0f9e3bffd7fb9944fe4a5108c46e3a887f4a81af903769b3e89fa9a763649e07bfe36feef61c0bd85dc100d70c8c4b5c86291632a5404b07d97af645d820fff856de193ba86f0b13a848011dff415075b4a68c4b51cdf2b46c2f1739fd04e0ef652f065f212c6bd91a72b09c000c5a0045b45a275f4b16c4ba1854cd3e062cdde96abe754a47d9601e17c25316b6d5c4945aeeb311bf3609e1bd152cc14704f299f10f6d515557a6217c204293d9883c8e1229878947ce8973060170a42c276028013e3a78fb8fdfebbf2375e684f0ec2369c49a823725baa68d467c0694c3a41d4a1850583b977fb7f39061a5d76153982d1a4fa1cfae1e29fbcdd01546c59fe6d290d4bb6166283006831fd9d31f08f26af6eef5ef856f92519f281dcd555007f0afe0c7d816dbb366c0b414d067310d6deeb3ed3f11f3667e3a158e035f8655af5f9ea5453612a7ba723a50d54021c32a3ac406e4f7542dfa2791738e7039fd64d9aa010fdbe3846291ee954b089e50df10bf66acfdd4a0c41fd5a295230741fc8d0dbf9023e801a3227930fca3186257a10f850ad8712df24203c7502f906dad2d738ff424a0ebc79129b1647ae11aa698c1e0dcef7686448567b9c50c529bdf7f4a1316d39a9033036e16ad920f757d1c82c0b9f0ee8f4187ef6ec62e1633799ba1c357dab1a69db1844ea3af023ef85cb40b3647631b66c5053a3eb86c355fd630d865be0b568692e7140bd79887de8bbf61bce3343ea9d6fd8234be4d6e65b73f16a987fa7d7a418f01001cf54bdd2d6d948dcf0d076bc8341cb831ed0e130c6c5563fcd5a7db40e04710b8f0e160219bb129cef1e403d2dd9f99b42b8bae0a7c167d8a46031a11b908640c149cba7db1a14ec077bd8fede08cf7d71682ae693443b8d6959d0080bfb41ead113d7646986c86a3a52eea6322e2db42843e89ab93c4ba39b5c1df42f9cd5945a484956ae2704bae509f4c742229d7eb85658d7d5f825c73d775f6d25245922b2e031a5e1a25921c01df8fb5e52ef335a26f7d2432049bbcfc10c3409018e3510b588ae3e48f79a3065e03c02945b8c8c0dd91fca7094b3e6712f73a73b0000001aa84b6c09889012dc5d2318fbfbe2808b2e885e3b9bd93af4ee3cc36a884d229db201b7aefa41de698830fbb72a256d848469a6e41f4745d12425ca94e9ae26c404209d487378ff9ed50de1d0e1d0984357cc5322ac9b3783019fa45f6d714d1642572af9ce0afc69d1fd0180811e3099182d8499bff71eaf950bfab0e60f2acabac8bfdbf6c460717a658903c2663f38820ad9948478757d2894259fe05fc4bea7eea9b6006e45d472c8959b4f57aa1cebd6fabc98dbcb3f9c02db1811be4c6620a76eee0d86877ec61533f4d7fafcd3493d454f5f24367a90798fad00fce9def6b9ab17cd262a765700ce309042a79adb0e624bf7adeb022032d23ac679a2fba799f12292854378e9121d720ff56f28516e7de03d4272dbf7b9e67c0fd0fcf0f3613abd894e712aee1457e471e45be07a455e341cb07edeba100238c202dc9533033337593411637273cd4078264403150d17d3912c0c76f6d1180bb78d9d5b94a8fa2ea9536c28bb4d2d2ad7b89872d5d2ed5844fc8b2dd6157852fc47d647b2e9bed7aeed6d5c1d11beb8e1df188a58a6d693f32396b2c9ed8caf9ea4191056acb1eefe94c698eaa497fdde23e4d8fbfa3383fafc658d6008a51e742cfe07b66a2e0289f703e6581b36a262fca1e9243129e0de1d024612f1b99371f7669608c9daa8908a576c5ea2ae496a81e43605cdc8b6fa6f081bd1a89de2ad988fac759dc402a25b4489031599f7d9161d0d6e494e33316cb3e525bef996ee849f1b722fc359a06db88482661aa938e2f3b1ec2680df25d42ab5a60447ff6069ac58f16c7f642d95811df7b0d731c06fa63daa294e787ee0ba6931831b29637bb584202a86657da755bddddfe560f8220e5731a8b0e6d2525185844aea639bcf425236df18541250f57f93034ce134c838f140fba64e9e6d31f5cfd4fc292a58aff58e9a0f7853b5d1ba96f180362409135068db453c8096f4176e3bfe5c8efe5bfa097f537d0df2aa522f87f232afbdd1a529bf287a9a8c01cf9b14a2d94fe5bdde6e7d02d19efbd9f7d7b56af69719d5b3f76cd0ff5a8b138c3f02052c22e40062f82f01000181a9e12e722661c3fce14d8dc0a6491880f85bb8a8e608d7577889c158e210c900000001e8a75807cb9871ece612f9cfcbe60d72dbb2af7f0da93ddae249e7907f8b8e0cabf3b7e2af7b28b8cdd398903befc0d85c316e291b216c5ecdd8bccb87b14b0b6f67fccd0b25095b29c9e63b000d47d7d21c0522fb9763d92e67fc2d3f69b206b0f5a5aa6618ec45fc028e3fc454fa756ed2627a828437af401e9e24c004a291000114b0cac3e14c4e1a4a4fd22c98563b9cbe859c67768a39f67abd5dbe55d3d16ff58e5c45b21d8c573f54b90190b15d01d26b2845f9e6e92c793df6e7c6390a791ba620c3640b950d6e35fd3a4bb5c5030145c29cd3e025e63bfa9505277a5d6e6a9b7a944bba44b586a0308a8c118656e2017d6d7535f6e3eade13042662d05eefa91d1f4757fcd0b4b844554e77366f4b36a7068e15c2f06aaa11f6bcfd2e9e36231530069f7fb99a2771050689f24f332b427fdd05d1d5f3219230a1406f0955e3ddc0ef5ce2c7f160d797f3e54ef5782001eadbac17db26d90f54cd5a6d13bfd832cf09284caa5650e1534050ef8446b1de1e9788368bb07d435405fd98c537e9169bc32fd703c7a5668bfff4860d24d74813c8ef0a2c96d4db81f8e52dc837f545fdeab3b917b2ab405231773a466cbdff8652620bee6490c4407466109afa42510fb1c39c8d77ed151dbcc5dbaf8c6cf2319b4d097834198adb8cd02e7d3a9aa2c20e5461a18f18f1ca3cb121fdb936f4ca5b410d0f5acbc8c7077c83b07db45ab5ecb29d3d94b384b76274de92dc8ac3c069d82956c7a06eea3ed6ef382f9dcefeb8a865c3e65db5050991d9e8f07ef847afca38cbabaf82980a66657d94bac8e58e868bf8af6a75c5d4640a1311c4b691ee6124697f5d2858d9c5da1b32874ccb063d97494888613bbe7b1a2b542d0e38acd713c7141317c0b825f958e64d4da2c553cdceb4b944f30fa76db65fcec10c6710276fac33462496e7df033277558b54ac238f073776cb533551ced42caeba694f31fd8d40ccb9fb2e104aa0357a122141052c9a741c4c2c736b6dd0363ddbf27e2922ae2800cb93abe63b70c172de70362d9830e53800398884a7a64ff68ed99e0b9d2e26bdef115ced7bd36305a54386996133c4e65759f3731637a40eba67da103f98adbe364f148b0cc2042cafc6be1166fae39090ab4b354bfb6217b964453b63f8dbd10df936f1734973e0b3bd25f4ed440566c923085903f696bc6347ec0f6f3f63aab58e63b6449583df5658a91972a20291c6311b5b3e5240aff8d7d00212278dfeae9949f887b70ae81e084f8897a5054627acef3efd01c8b29793d522ca2ced953b7fb95e3ba986333da9e69cd355223c929731094b6c2174c7638d2e60040850b766b126a2b4843fcdfdffa5d5cab3f53bc860a3bef68958b5f066177097b04c2aa045a0deffcaca41c5ac92e694466578f5909e72bb78d33310f705cc2dcaa338b312112db04b435a706d63244dd435238f0aa1e9e1598d354708102dcc4273c8a0ed2337ecf7879380a07e7d427c7f9d82e538002bd1442978402cdaf63debf5b40df902dae98dadc029f281474d190cddecef1b10653248a234151f91982912012669f74d0cfa1030ff37b152324e5b8346b3335a0aaeb63a0a2de2bca6a8d987d668defba89dc082196a922634ed88e065c669e526bb8815ee1be8ae2ad91d463bab75ee941d33cc5817b613c63cda943a4c07f600591b088a25d53fdee371cef596766823f4a518a583b1158243afe89700f0da76da46d0060f15d2444cefe7914c9a61e829c730eceb216288fee825f6b3b6298f6f6b6bd62e4c57a617a0aa10ea7a83aa6b6b0ed685b6a3d9e5b8fd14f56cdc18021b12253f3fd4915c19bd831a7920be55d969b2ac23359e2559da77de2373f06ca014ba2787d063cd07ee4944222b7762840eb94c688bec743fa8bdf7715c8fe29f104c2a01a43dd57ccb38a327620de9cd0ac989bc32f16ed4099595f280f1397af9b7a42f012fac20755b7bb7c99d302b782ea36f62a1b0cfe8d7d4d09a58e8ba5da26f457803a080808008858180800880808080080000a2b9238016d77edb4de76878add7f187387c6967d50f81db8a9daaf8c8b4ac392e0bcb652aba42687e07769a8b64239eb698abcd018fd12781b6666fd518630ec40418346bc9e84eeb6bacc1c6853991575f4ea79cdf805e57627c990a3a42d60cc91b8db8db180feb48cd6f5299ed0fde56ddbd1dfedac207a47c18a74409ceecabcae1b91aed5644575583bd0e9e70dd1e0906fabe693cd11b824f5ac0ff1bc2dcaaa565ebe39afdeff61aa456178cb97a9b4500f6b3df90d2d45699c9c62264332b03441ce0788c7bb86732b75da866e832164fef30c9b125021facf3b1be1e98c892551344ca2941bb8f885c8b3eb132eefa773c9a4661ae645fcbb2dac0393027e9231ef6a900159e9e1d7c6e8598b1f2d1f540a16176bbc4c8e82a352013aeff7f0b48d3b0635e51257de1231a70ad3cb2e18baf2a1a1415e204179d4ede7ee77c74aebf7e2a42afada5a6fee7473e2ba339cc08a959647d11d81b1a906427ea799a5ef9428ea87451a140c2dec90edc78847f6c147756293fdc177f93cac8ec6477390776a1685c164a1dd835dbfcb7bd370bf71f0bc1800dfc2fd4b7e060f5d37a18280b7cae372be2b3a39b6d206ab98c0e81519a4a54fb813ea5e8a3d72bb5dd02062bf77767cfb0351a14884af28cf0a3fb4b82e27206f1aae00f2537480c0fb0434620d45908f9f54546ae5a5b5a731d599c47ac9895b9dbfcc469f3a8a7adbba4a8dd6e3d73b092e937fbff7bc4018129c83578e3d3f894ce6860d3f1542f18ea12d3a7af998aa82f45feb45757765f184c54a99f433663d6d49d7ad760734f7f548f1fc235bada2b8093598436be62c500dfe229953f1839dfffe247b8c2648b8897b322ddef3baa306b4897cdec410f8203cb49e161200326e49b5913b187502a1d6383849cbb6c88560d681a9db829d8d93e765f9877e83de52b3aa2e4b587eda36105e403b6f7402e90ae21946628deecd43af00b68ed5145f178aac1b0d924d8af9efccf29b224634c28ce821a8d0114b0cac3e14c4e1a4a4fd22c98563b9cbe859c67768a39f67abd5dbe55d3d16ff58e5c45b21d8c573f54b901d8ae560118bd0bedfa577fd3f50a3f6d11792386f19b967843d870f0d623068368346dab000001207a636173685f636c69656e745f6261636b656e643a6f75747075745f696e666f12020cd612b51afd462f8b19e3edcaf791570001800cf59e49c1aa1bbd2b596fb3a3e58b68c28598cc2c409d499df394b98cc62203b8820700f8307a26d980a9b4402768df6107a5b30bbc637b6ade144ccc0672d0400bc505000168b44da6145a1c08a43e523f7f8af3fd43753518dad57d772ce7da253918552f".chunked(2).map { it.toInt(16).toByte() }.toByteArray())

        assertEquals(
            res.nextPart(),
            "ur:zcash-pczt/1-13/lpadbtcfbwfwcyhtcpdpcwhkadkeoyadhkbwfsgdfxhtghadaeaeaeahletonsreaotlnbnsstbnadaetslfpdadlpadaeadcpkniahsjkisheiajzinihjtjyheidhsiajeihjtieftjojpjljojljkhsjzheinjtiyjlbbbntbbgrecyzcfgdllucfvlwesgylmehgpelfpdadaeadnblgamcfkoptbbmdchstkglbsfayvahscpuosbjtvajsfmrljsdpdnlopsaeaeadcxkniahsjkisheiajzinihjtjyheidhsiajeihjtieftjlkpjyjokpjyheinjtiyjldaaecnjyehhdghktfwetgdehkseehkinjofwjygsisgdhggueheogegdfygyecgmgtjegtfpengtaeaeaezosawkdybnadwtrllfbtaevleekelgoxwyhsfgjyemjzrffeecntpkghytregafmadaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaeaodwgebncycxcwrefhimfmgtkevlfmmohydrghsbzcvtvarttlolldprrtcxlowdadjernhgcachiyylchwpltssoscffthpatrnhlksprsekkhsfwcwwpndbeaafghhasjtcagwlaihcxcygavwhyckfxskwfhefhrtbewklepkgdetnnswghlusezmwlckbkadhfrloxktmnbteecnflylptetrfldaxdtcxytwpwdgdzors"
        )
    }
}